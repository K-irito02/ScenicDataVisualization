# 马蜂窝全国旅游景点爬虫

## 步骤

### 1. 分析网站数据
1. 从小到大（爬取的数据量和范围）
2. 使用Selenium点击时，注意查看元素是否被遮挡（有时可能浏览器窗口大小问题）
   - 可以定位元素滑动窗口（但有时小窗口可以只能上下滑动，左右滑动不了）
   - 执行JavaScript来点击一个网页元素（`driver.execute_script()`）
3. 注意有的页面结构可能会发生变化
4. 有的数据可使用抓包

### 2. 防反爬虫措施
1. IP代理
2. 随机User-Agent
3. 禁用Cookie
4. 限制访问频率
5. 有的网站可能需要登录

### 3. 构建分布式爬虫
1. 支持断点续爬
   - 构建URL池，爬虫获取链接进行爬取
   - 当爬虫遇到情况结束时，若数据没有提取完，可返回当前页面的URL并清除当下这部分的数据（以便后续重新提取）

### 4. 数据提取
1. 可根据数据库每个文件下的数据位置和关系进行筛选或分类提取数据

## 注意事项

### 1. 日志记录
1. 在测试和一些关键的地方进行记录，方便后续进行调试和查看爬虫信息

### 2. 爬虫效率
1. 优化爬虫代码
2. 优化相关工具或技术的配置
   - Selenium使用无头模式运行浏览器，减少资源消耗。
   - 使用更高效的XPath或CSS选择器，减少DOM遍历时间。
   - 如果不需要复杂的JavaScript执行，可以考虑使用更轻量的工具，如Requests-HTML。
3. 禁用不必要的功能
   - 禁用图片、CSS、JavaScript等不必要的资源加载。
   - 例如，使用Chrome的prefs设置禁用图片加载。
4. 并行执行
   - 使用多线程或多进程来并行处理多个页面。
   - 注意控制并发数量，以免被目标网站封禁。
5. 减少浏览器启动次数
   - 尽量在一个浏览器会话中处理多个请求，减少启动和关闭浏览器的开销。